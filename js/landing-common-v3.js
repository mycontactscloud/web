"use strict";let msjPolPriv="";const MCC_LANDING_SLUGS=new Set(["cloud-contacts-crm","crm-document-management","crm-calendar-scheduling","crm-follow-up-reminders"]),MCC_LANG_PREFIXES=new Set(["es","fr","it","pt","de","ca","gl"]);function getPathSegments(){return window.location.pathname.split("/").filter(Boolean)}function getLangPrefixFromPath(){const e=(getPathSegments()[0]||"").toLowerCase();return MCC_LANG_PREFIXES.has(e)?e:""}function getLandingSlugFromPath(){const e=getPathSegments();if(!e.length)return"";const t=(e[0]||"").toLowerCase(),a=MCC_LANG_PREFIXES.has(t)?(e[1]||"").toLowerCase():t;return MCC_LANDING_SLUGS.has(a)?a:""}function getLandingRootUrl(){const e=getLandingSlugFromPath();if(!e)return"/";const t=getLangPrefixFromPath();return t?`/${t}/${e}/`:`/${e}/`}function isLandingPage(){return"landing"===(document.body&&document.body.dataset&&document.body.dataset.page||"")||!!getLandingSlugFromPath()}function buildDestination(e){const t=(e||"").toLowerCase(),a={es:"/es",fr:"/fr",it:"/it",pt:"/pt",de:"/de",ca:"/ca",gl:"/gl"},s=getLandingSlugFromPath();if(isLandingPage()&&s){if("en"===t)return`/${s}/`;if(a[t])return`/${t}/${s}/`}return a[t]||"/"}function resolveDestination(e,t){return fetch(e,{method:"HEAD",cache:"no-store"}).then((a=>{if(a&&a.ok)return e;const s=a?a.status:0;return 403===s||405===s?fetch(e,{method:"GET",cache:"no-store"}).then((a=>a&&a.ok?e:t)).catch((()=>t)):t})).catch((()=>fetch(e,{method:"GET",cache:"no-store"}).then((a=>a&&a.ok?e:t)).catch((()=>t))))}function cambiarTextoIdioma(e){const t=(e||"en-US").substring(0,2).toLowerCase();msjPolPriv="es"===t?"Debes leer y aceptar la Política de Privacidad para poder enviar el formulario":"fr"===t?"Vous devez lire et accepter la Politique de confidentialité afin de pouvoir envoyer le formulaire":"pt"===t?"Você deve ler e aceitar a Política de Privacidade para poder enviar o formulário":"it"===t?"Devi leggere e accettare l'Informativa sulla Privacy per poter inviare il modulo":"de"===t?"Sie müssen die Datenschutzrichtlinie lesen und akzeptieren, um das Formular absenden zu können":"ca"===t?"Ha de llegir i acceptar la Política de Privadesa per poder enviar el formulari":"gl"===t?"Debe ler e aceptar a Política de Privacidade para poder enviar o formulario":"You must read and accept the Privacy Policy in order to submit the form",nuevoEnlaceMS(e),nuevoEnlaceIos(e)}function seleccionarIdioma(e){let t="",a="";const s=(e||"").toString().trim(),o=s.toLowerCase();switch(e="ca"===o||o.startsWith("ca-")?"ca-ES":"gl"===o||o.startsWith("gl-")?"gl-ES":s){case"es-ES":case"es-es":t="es",a=" Español (España)",e="es-ES";break;case"es-MX":case"es-mx":t="mx",a=" Español (México)",e="es-MX";break;case"es-CL":case"es-cl":t="cl",a=" Español (Chile)",e="es-CL";break;case"es-US":case"es-us":t="us",a=" Español (Estados Unidos)",e="es-US";break;case"es-AR":case"es-ar":t="ar",a=" Español (Argentina)",e="es-AR";break;case"es-CO":case"es-co":t="co",a=" Español (Colombia)",e="es-CO";break;case"es-PE":case"es-pe":t="pe",a=" Español (Perú)",e="es-PE";break;case"es-UY":case"es-uy":t="uy",a=" Español (Uruguay)",e="es-UY";break;case"en-US":case"en-us":t="us",a=" English (United States)",e="en-US";break;case"en-GB":case"en-gb":t="gb",a=" English (Great Britain)",e="en-GB";break;case"en-CA":case"en-ca":t="ca",a=" English (Canada)",e="en-CA";break;case"en-AU":case"en-au":t="au",a=" English (Australia)",e="en-AU";break;case"en-NZ":case"en-nz":t="nz",a=" English (New Zealand)",e="en-NZ";break;case"en-IE":case"en-ie":t="ie",a=" English (Ireland)",e="en-IE";break;case"en-IN":case"en-in":t="in",a=" English (India)",e="en-IN";break;case"en-SG":case"en-sg":t="sg",a=" English (Singapore)",e="en-SG";break;case"en-HK":case"en-hk":t="hk",a=" English (Hong Kong)",e="en-HK";break;case"en-MY":case"en-my":t="my",a=" English (Malaysia)",e="en-MY";break;case"it-IT":case"it-it":t="it",a=" Italiano (Italia)",e="it-IT";break;case"it-CH":case"it-ch":t="ch",a=" Italiano (Svizzera)",e="it-CH";break;case"pt-PT":case"pt-pt":t="pt",a=" Português (Portugal)",e="pt-PT";break;case"pt-BR":case"pt-br":t="br",a=" Português (Brasil)",e="pt-BR";break;case"fr-FR":case"fr-fr":t="fr",a=" Français (France)",e="fr-FR";break;case"fr-CA":case"fr-ca":t="ca",a=" Français (Canada)",e="fr-CA";break;case"fr-BE":case"fr-be":t="be",a=" Français (Belgique)",e="fr-BE";break;case"fr-CH":case"fr-ch":t="ch",a=" Français (Suisse)",e="fr-CH";break;case"de-DE":case"de-de":t="de",a=" Deutsch (Deutschland)",e="de-DE";break;case"de-AT":case"de-at":t="at",a=" Deutsch (Österreich)",e="de-AT";break;case"de-BE":case"de-be":t="be",a=" Deutsch (Belgien)",e="de-BE";break;case"de-CH":case"de-ch":t="ch",a=" Deutsch (Schweiz)",e="de-CH";break;case"ca-ES":case"ca-es":case"ca":t="es-ct",a=" Catalá",e="ca-ES";break;case"gl-ES":case"gl-es":case"gl":t="es-gl",a=" Galego",e="gl-ES";break;default:{const s=(e||"en").substring(0,2).toLowerCase();"es"===s?(t="es",a=" Español (España)",e="es-ES"):"fr"===s?(t="fr",a=" Français (France)",e="fr-FR"):"it"===s?(t="it",a=" Italiano (Italia)",e="it-IT"):"pt"===s?(t="pt",a=" Português (Portugal)",e="pt-PT"):"de"===s?(t="de",a=" Deutsch (Deutschland)",e="de-DE"):"ca"===s?(t="es-ct",a=" Catalá",e="ca-ES"):"gl"===s?(t="es-gl",a=" Galego",e="gl-ES"):(t="us",a=" English (United States)",e="en-US")}}const n=document.getElementById("botonIdioma");return n&&(n.innerHTML=`<svg class="icon"><use xlink:href="#${t}"></use></svg>${a}`),e}function fijId(e){const t=seleccionarIdioma(e);localStorage.setItem("idiomaPais",t),cambiarTextoIdioma(t);const a=t.substring(0,2).toLowerCase(),s=getLangPrefixFromPath();if(isLandingPage()&&!s&&"en"===a)return!1;const o={es:"/es",fr:"/fr",it:"/it",pt:"/pt",de:"/de",ca:"/ca",gl:"/gl"}[a]||"/",n=buildDestination(a);return isLandingPage()&&"en"!==a&&n!==o?(resolveDestination(n,o).then((e=>window.location.replace(e))),!1):(window.location.replace(n),!1)}function getCountryCodeAndLanguage(){const e=(navigator.language||navigator.userLanguage||"en-US").trim();if(!e)return"en-US";const t=e.split("-"),a=(t[0]||"en").toLowerCase(),s=(t[1]||"US").toUpperCase();return"ca"===a?"ca-ES":"gl"===a?"gl-ES":t[1]?`${a}-${s}`:`${a}-US`}function normalizeDropdownHrefsForLanding(){const e=getLandingSlugFromPath();if(!e)return;const t=document.querySelectorAll("#dropdownOptions a.dropdown-item");t&&t.length&&t.forEach((t=>{const a=(t.getAttribute("onclick")||"").trim();if(!a)return;const s=a.match(/fijId\(\s*['"]([^'"]+)['"]\s*\)/);if(!s)return;const o=(s[1]||"").trim().substring(0,2).toLowerCase();"en"!==o?MCC_LANG_PREFIXES.has(o)&&t.setAttribute("href",`/${o}/${e}/`):t.setAttribute("href",`/${e}/`)}))}function nuevoEnlaceMS(e){const t=document.getElementById("enlaceMS");if(!t)return;const a=(e||"en-US").toLowerCase().replace("_","-");t.href={"es-es":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-es&gl=ES","es-mx":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-mx&gl=MX","es-cl":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-cl&gl=CL","es-us":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-us&gl=US","es-ar":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-ar&gl=AR","es-co":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-co&gl=CO","es-pe":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-pe&gl=PE","es-uy":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=es-uy&gl=UY","en-us":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-us&gl=US","en-gb":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-gb&gl=GB","en-ca":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-ca&gl=CA","en-au":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-au&gl=AU","en-nz":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-nz&gl=NZ","en-ie":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-ie&gl=IE","en-in":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-in&gl=IN","en-sg":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-sg&gl=SG","en-hk":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-hk&gl=HK","en-my":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-my&gl=MY","it-it":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=it-it&gl=IT","it-ch":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=it-ch&gl=CH","pt-pt":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=pt-pt&gl=PT","pt-br":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=pt-br&gl=BR","fr-fr":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=fr-fr&gl=FR","fr-ca":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=fr-ca&gl=CA","fr-be":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=fr-be&gl=BE","fr-ch":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=fr-ch&gl=CH","de-de":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=de-de&gl=DE","de-at":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=de-at&gl=AT","de-be":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=de-be&gl=BE","de-ch":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=de-ch&gl=CH","ca-es":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=ca-es&gl=ES","gl-es":"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=gl-es&gl=ES"}[a]||"https://apps.microsoft.com/detail/9N7118DTCSTB?hl=en-us&gl=US"}function nuevoEnlaceIos(e){const t=document.getElementById("enlaceIos");if(!t)return;const a=(e||"en-US").substring(0,2).toLowerCase();t.href="it"===a?"https://apps.apple.com/it/app/my-contacts-cloud-app/id6474253983":"pt"===a?"https://apps.apple.com/pt/app/my-contacts-cloud-app/id6474253983":"fr"===a?"https://apps.apple.com/fr/app/my-contacts-cloud-app/id6474253983":"de"===a?"https://apps.apple.com/de/app/my-contacts-cloud-app/id6474253983":"es"===a||"ca"===a||"gl"===a?"https://apps.apple.com/es/app/my-contacts-cloud-app/id6474253983":"https://apps.apple.com/us/app/my-contacts-cloud-app/id6474253983"}function initAnimations(){if(!("IntersectionObserver"in window))return;const e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("animate__animated",e.target.dataset.animation),t.unobserve(e.target))}))}),{threshold:.1});document.querySelectorAll("[data-animation]").forEach((t=>e.observe(t)))}function loadSvgSpriteOnce(){document.getElementById("mcc-svg-sprite")||fetch("https://cdn.jsdelivr.net/gh/mycontactscloud/web/img/icons-sprite.svg").then((e=>e.text())).then((e=>{const t=document.createElement("div");t.id="mcc-svg-sprite",t.style.display="none",t.innerHTML=e,document.body.appendChild(t)})).catch((e=>console.error("Error loading sprite:",e)))}function initContactForm(){const e=document.getElementById("fContacto");e&&(e.onsubmit=async function(t){t.preventDefault();const a=document.getElementById("aceptarPolitica1");if(!a||!a.checked)return alert(msjPolPriv||"You must read and accept the Privacy Policy in order to submit the form"),!1;try{const t=new FormData(e),a=await fetch(`https://${window.location.host}/formContacto`,{method:"POST",body:t}),s=await a.json();if(s&&s.success){const t=document.getElementById("msgEnviado");t&&t.classList.add("d-block"),e.reset()}else alert(s&&s.message?s.message:"Unknown error")}catch(e){alert(e&&e.message?e.message:String(e))}return!1})}function initCookieConsentUI(){const e="cookiesConsentWebMyContacts",t="cookiesNecesariasWebMyContacts",a="cookiesFuncionalesWebMyContacts",s=document.getElementById("cookieBanner"),o=document.getElementById("cookieAccept"),n=document.getElementById("cookieReject");document.getElementById("cookieSettings");localStorage.getItem(e)||null===localStorage.getItem(t)||localStorage.setItem(e,"1");function c(s){localStorage.setItem(t,"1"),localStorage.setItem(a,s?"1":"0"),localStorage.setItem(e,"1")}function i(){s&&s.classList.remove("show")}function r(){setTimeout((()=>{document.body.classList.remove("modal-open"),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"),document.querySelectorAll(".modal-backdrop").forEach((e=>e.remove()))}),450)}!("1"===localStorage.getItem(e))&&s&&s.classList.add("show"),o&&o.addEventListener("click",(()=>{c(!0),i()})),n&&n.addEventListener("click",(()=>{c(!1),i()}));const l=document.getElementById("modalConfigCookies"),d=document.getElementById("necesarias"),p=document.getElementById("funcionales"),m=document.getElementById("ninguna"),g=document.getElementById("todas"),h=document.getElementById("guardar");l&&d&&p&&h&&(l.addEventListener("show.bs.modal",(()=>{d.checked=!0,d.disabled=!0,p.checked="1"===(localStorage.getItem(a)||"0")})),g&&g.addEventListener("click",(()=>{d.checked=!0,p.checked=!0})),m&&m.addEventListener("click",(()=>{d.checked=!0,p.checked=!1})),h.addEventListener("click",(()=>{c(p.checked),i();try{if(window.bootstrap&&window.bootstrap.Modal){const e=window.bootstrap.Modal.getInstance(l);e&&e.hide()}}catch(e){}r()})),l.addEventListener("hidden.bs.modal",r))}document.addEventListener("DOMContentLoaded",(()=>{const e=isLandingPage();if(e)try{normalizeDropdownHrefsForLanding()}catch(e){console.error("Dropdown normalization failed:",e)}const t=getLangPrefixFromPath(),a={es:"es-ES",fr:"fr-FR",it:"it-IT",pt:"pt-PT",de:"de-DE",ca:"ca-ES",gl:"gl-ES"},s=(localStorage.getItem("idiomaPais")||"").trim();let o="";o=t?s&&s.toLowerCase().startsWith(t)?s:a[t]||"es-ES":e?s&&s.toLowerCase().startsWith("en")?s:"en-US":s||getCountryCodeAndLanguage();const n=seleccionarIdioma(o);!s&&e&&localStorage.setItem("idiomaPais",n),cambiarTextoIdioma(n),initCookieConsentUI(),initAnimations(),loadSvgSpriteOnce(),initContactForm()}));